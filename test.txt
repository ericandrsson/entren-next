  const handleMapClick = useCallback(
    (e: L.LeafletMouseEvent) => {
      if (
        controlsRef.current &&
        controlsRef.current.contains(e.originalEvent.target as Node)
      ) {
        return;
      }

      if (previewedSpot) {
        setPreviewedSpot(null);
        return;
      }

      const newTempSpot = {
        id: "temp",
        lat: e.latlng.lat,
        lng: e.latlng.lng,
        name: "New Spot",
        category: { id: "", name: "", icon: "" },
        created: new Date().toISOString(),
        isVerified: false,
        user: "",
      };

      setTempSpot(newTempSpot);
      zoomToSpot(e.latlng);
      setIsSheetOpen(true);
    },
    [previewedSpot, setPreviewedSpot, setTempSpot, zoomToSpot, setIsSheetOpen]
  );